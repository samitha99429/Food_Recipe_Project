{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import'../styles/favorite.css';import Swal from'sweetalert2';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Favorites=()=>{const[favorites,setFavorites]=useState([]);useEffect(()=>{const fetchFavorites=async()=>{const token=localStorage.getItem('token');const{data}=await axios.get('http://localhost:3001/api/recipes/favorites',{headers:{Authorization:`Bearer ${token}`}});setFavorites(data);};fetchFavorites();},[]);const handleRemove=async idMeal=>{const token=localStorage.getItem('token');Swal.fire({title:'Are you sure?',text:\"Do you really want to remove this recipe from favorites?\",icon:'warning',showCancelButton:true,confirmButtonText:'Yes, remove it!',cancelButtonText:'No, cancel!'}).then(async result=>{if(result.isConfirmed){try{await axios.delete(`http://localhost:3001/api/recipes/favorites/${idMeal}`,{headers:{Authorization:`Bearer ${token}`}});setFavorites(favorites.filter(fav=>fav.idMeal!==idMeal));Swal.fire('Removed!','The recipe has been removed from favorites.','success');}catch(error){console.error('Failed to remove favorite:',error);Swal.fire('Error!','Failed to remove the recipe. Try again later.','error');}}});};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"mt-2 \",children:\"Favorites\"}),/*#__PURE__*/_jsx(\"div\",{className:\"favGrid\",children:favorites.map(recipe=>/*#__PURE__*/_jsxs(\"div\",{className:\"fav-card\",children:[/*#__PURE__*/_jsx(\"img\",{src:recipe.strMealThumb,alt:recipe.strMeal,className:\"fav-image\"}),recipe.strMeal,/*#__PURE__*/_jsx(\"div\",{className:\"mt-2\",children:/*#__PURE__*/_jsx(\"button\",{className:\"remove-button\",onClick:()=>handleRemove(recipe.idMeal),children:\"Remove\"})})]},recipe.idMeal))})]});};export default Favorites;","map":{"version":3,"names":["React","useState","useEffect","axios","Swal","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Favorites","favorites","setFavorites","fetchFavorites","token","localStorage","getItem","data","get","headers","Authorization","handleRemove","idMeal","fire","title","text","icon","showCancelButton","confirmButtonText","cancelButtonText","then","result","isConfirmed","delete","filter","fav","error","console","children","className","map","recipe","src","strMealThumb","alt","strMeal","onClick"],"sources":["/Users/samithadilshan/Documents/Company_Projects/codeSec_Final/Food_Recipe_Project/app/src/components/Favorites.js"],"sourcesContent":["\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport '../styles/favorite.css';\nimport Swal from 'sweetalert2';\n\n\nconst Favorites = () => {\n  const [favorites, setFavorites] = useState([]);\n  useEffect(() => {\n    const fetchFavorites = async () => {\n      const token = localStorage.getItem('token');\n      const { data } = await axios.get('http://localhost:3001/api/recipes/favorites', {\n        headers: { Authorization: `Bearer ${token}` }\n      });\n      setFavorites(data); \n    };\n\n    fetchFavorites();\n  }, []);\n\n \n  const handleRemove = async (idMeal) => {\n    const token = localStorage.getItem('token');\n    Swal.fire({\n      title: 'Are you sure?',\n      text: \"Do you really want to remove this recipe from favorites?\",\n      icon: 'warning',\n      showCancelButton: true,\n      confirmButtonText: 'Yes, remove it!',\n      cancelButtonText: 'No, cancel!',\n    }).then(async (result) => {\n      if (result.isConfirmed) {\n        try {\n          await axios.delete(`http://localhost:3001/api/recipes/favorites/${idMeal}`, {\n            headers: { Authorization: `Bearer ${token}` }\n          });\n          setFavorites(favorites.filter(fav => fav.idMeal !== idMeal));\n          Swal.fire('Removed!', 'The recipe has been removed from favorites.', 'success');\n          \n        } catch (error) {\n          console.error('Failed to remove favorite:', error);\n          Swal.fire('Error!', 'Failed to remove the recipe. Try again later.', 'error');\n        }\n      }\n    });\n  };\n  return (\n    <>\n    <h2 className='mt-2 '>Favorites</h2>\n    <div className=\"favGrid\">\n      {favorites.map((recipe) => (\n        <div key={recipe.idMeal} className=\"fav-card\">\n          <img\n            src={recipe.strMealThumb}\n            alt={recipe.strMeal}\n            className=\"fav-image\"\n          />\n          {recipe.strMeal}\n          <div className='mt-2'>\n            <button className='remove-button' onClick={() => handleRemove(recipe.idMeal)}>Remove</button>\n           \n          </div>\n        </div>\n      ))}\n    </div>\n    </>\n  );\n};\n\nexport default Favorites;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}